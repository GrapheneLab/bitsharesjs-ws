!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.t=e();else if("function"==typeof define&&define.i)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=e()}}(function(){return function r(c,s,u){function a(n,e){if(!s[n]){if(!c[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(f)return f(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var o=s[n]={t:{}};c[n][0].call(o.t,function(e){return a(c[n][1][e]||e)},o,o.t,r,c,s,u)}return s[n].t}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)a(u[e]);return a}({1:[function(e,n,t){"use strict";t.s=!0;var r=i(e("./ChainWebSocket")),c=i(e("./GrapheneApi")),s=i(e("./ChainConfig"));function i(e){return e&&e.s?e:{default:e}}var o=void 0,u=!0;t.default={u:function(e){this.h=e,o&&o.u(e)},l:function(e){u=e},reset:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",n=this,t=arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4e3;return this.close().then(function(){return(o=new a).u(n.h),o&&t&&o.connect(e,i),o})},v:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",n=arguments[1],t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4e3,i=arguments[3];return o||(o=new a).u(this.h),o&&n&&o.connect(e,t,i),o},m:function(){return Apis.v().p},close:function(){return o?new Promise(function(e){o.close().then(function(){o=null,e()})}):Promise.resolve()}};var a=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.connect=function(t,e){var i=this,o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this.url=t;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&t.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this._=new r.default(t,this.h,e,u,function(){i.k.exec("get_objects",[["2.1.0"]]).catch(function(e){})}),this.T=this._.S("","").then(function(){console.log("Connected to API node:",t),i.k=new c.default(i._,"database"),i.g=new c.default(i._,"network_broadcast"),i.W=new c.default(i._,"history"),o&&(i.R=new c.default(i._,"crypto"));var e=i.k.init().then(function(){return i.k.exec("get_chain_id",[]).then(function(e){return i.p=e,s.default.C(e)})});i._.P=function(){i._.S("","").then(function(){i.k.init().then(function(){i.h&&i.h("reconnect")}),i.g.init(),i.W.init(),o&&i.R.init()})};var n=[e,i.g.init(),i.W.init()];return o&&n.push(i.R.init()),Promise.all(n)})},e.prototype.close=function(){var e=this;return this._?this._.close().then(function(){e._=null}):(this._=null,Promise.resolve())},e.prototype.I=function(){return this.k},e.prototype.M=function(){return this.g},e.prototype.O=function(){return this.W},e.prototype.A=function(){return this.R},e.prototype.u=function(e){this.h=e},e}();n.t=t.default},{K:2,G:3,U:4}],2:[function(e,n,t){(function(e){"use strict";t.s=!0;var c=void 0,s={q:e.N.D||"KRM"};c={j:"CORE",q:"KRM",B:15,F:86400,H:86400,L:{J:{j:"KRM",q:"KRM",p:"c85b4a30545e09c01aaa7943be89e9785481c1e7bd5ee7d176cb2b3d8dd71a70"},V:{j:"KRMT",q:"KRMT",p:"e81bea67cebfe8612010fc7c26702bce10dc53f05c57ee6d5b720bbe62e51bef"},X:{j:"BTS",q:"BTS",p:"4018d7844c78f6a6c41c6a552b898022310fc5dec06da467ee7905a8dad512c8"},Y:{j:"MUSE",q:"MUSE",p:"45ad2d3f9ef92a49b55c2227eb06123f613bb35dd08bd876f2aea21925a67a67"},Z:{j:"TEST",q:"TEST",p:"39f5e2ede1f8bc1a3a54a7914414e3779e33193f1f5693510e73cb7a87617447"},$:{j:"GOV",q:"FEW",p:"1cfde7c388b9e8ac06462d68aadbd966b58f88797637d9af805b4560b0e9661e"}},C:function(e){var n,t,i=void 0,o=void 0,r=void 0;for(i=0,n=(t=Object.keys(c.L)).length;i<n;i++)if(r=t[i],(o=c.L[r]).p===e)return c.ee=r,o.q&&(c.q=o.q,s.q=o.q),{ee:r,ne:o};c.ee||console.log("Unknown chain id (this may be a testnet)",e)},reset:function(){c.j="CORE",c.q="GPH",s.q="GPH",c.B=15,c.F=86400,console.log("Chain config reset")},te:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"GPH";c.q=e,s.q=e}},t.default=c,n.t=t.default}).call(this,e("_process"))},{ie:7}],3:[function(t,i,o){(function(e){"use strict";o.s=!0;var u=void 0;u="undefined"!=typeof WebSocket||e.N.oe?"undefined"!=typeof WebSocket&&"undefined"!=typeof document?t("ReconnectingWebSocket"):WebSocket:t("ws");var a=5,f=2*a,n=function(){function s(n,e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5e3,i=this,o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,s),this.h=e,this.re=setTimeout(function(){i.ce&&i.ce(new Error("Connection attempt timed out: "+n))},t);var c=o||"undefined"==typeof WebSocket||"undefined"==typeof document?u:WebSocket;try{this.se=new c(n)}catch(e){console.error("invalid websocket URL:",e,n),this.se=new c("wss://127.0.0.1:8090")}this.se.ue=5e3,this.ce=null,this.P=null,this.ae=a,this.fe=f,this.he=r,this.de=new Promise(function(e,n){i.ce=n,i.se.onopen=function(){clearTimeout(i.re),i.h&&i.h("open"),i.P&&i.P(),i.le=setInterval(function(){if(i.fe--,0==i.fe)return console.error("keep alive timeout."),i.se.terminate?i.se.terminate():i.se.close(),clearInterval(i.le),void(i.le=void 0);i.ae--,0==i.ae&&(i.he&&i.he(),i.ae=a)},5e3),e()},i.se.onerror=function(e){i.le&&(clearInterval(i.le),i.le=void 0),clearTimeout(i.re),i.h&&i.h("error"),i.ce&&i.ce(e)},i.se.onmessage=function(e){i.fe=f,i.listener(JSON.parse(e.data))},i.se.onclose=function(){i.le&&(clearInterval(i.le),i.le=void 0);for(var e=new Error("connection closed"),n=i.be+1;n<=i.ve;n+=1)i.we[n].reject(e);i.h&&i.h("closed"),i.me&&i.me()}}),this.ve=0,this.be=0,this.we={},this.pe={},this._e={}}return s.prototype.call=function(e){var t=this;if(1!==this.se.readyState)return Promise.reject(new Error("websocket state error:"+this.se.readyState));var n=e[1];if(this.ve+=1,"set_subscribe_callback"!==n&&"subscribe_to_market"!==n&&"broadcast_transaction_with_callback"!==n&&"set_pending_transaction_callback"!==n||(this.pe[this.ve]={ke:e[2][0]},e[2][0]=this.ve),"unsubscribe_from_market"===n||"unsubscribe_from_accounts"===n){if("function"!=typeof e[2][0])throw new Error("First parameter of unsub must be the original callback");var i=e[2].splice(0,1)[0];for(var o in this.pe)if(this.pe[o].ke===i){this._e[this.ve]=o;break}}var r={method:"call",Te:e};return r.id=this.ve,this.ae=a,new Promise(function(e,n){t.we[t.ve]={time:new Date,resolve:e,reject:n},t.se.send(JSON.stringify(r))})},s.prototype.listener=function(e){var n=!1,t=null;"notice"===e.method&&(n=!0,e.id=e.Te[0]),n?t=this.pe[e.id].ke:(t=this.we[e.id],this.be=e.id),t&&!n?(e.error?t.reject(e.error):t.resolve(e.result),delete this.we[e.id],this._e[e.id]&&(delete this.pe[this._e[e.id]],delete this._e[e.id])):t&&n?t(e.Te[1]):console.log("Warning: unknown websocket response: ",e)},s.prototype.S=function(e,n){var t=this;return this.de.then(function(){return t.call([1,"login",[e,n]])})},s.prototype.close=function(){var n=this;return new Promise(function(e){n.me=function(){e(),n.me=null},n.se.close(),1!==n.se.readyState&&e()})},s}();o.default=n,i.t=o.default}).call(this,t("_process"))},{Se:5,ie:7,se:6}],4:[function(e,n,t){"use strict";t.s=!0;var i=function(){function t(e,n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._=e,this.ye=n}return t.prototype.init=function(){var n=this;return this._.call([1,this.ye,[]]).then(function(e){return n.ge=e,n})},t.prototype.exec=function(e,n){return this._.call([this.ge,e,n]).catch(function(e){throw e})},t}();t.default=i,n.t=t.default},{}],5:[function(e,n,t){var i,o;i=this,o=function(){if("undefined"!=typeof window&&"WebSocket"in window)return d.prototype.onopen=function(e){},d.prototype.onclose=function(e){},d.prototype.We=function(e){},d.prototype.onmessage=function(e){},d.prototype.onerror=function(e){},d.Ee=!1,d.CONNECTING=WebSocket.CONNECTING,d.OPEN=WebSocket.OPEN,d.CLOSING=WebSocket.CLOSING,d.CLOSED=WebSocket.CLOSED,d;function d(e,n,t){var i={debug:!1,Re:!0,Ce:1e3,xe:3e4,Pe:1.5,ue:2e3,Ie:null,binaryType:"blob"};for(var o in t||(t={}),i)void 0!==t[o]?this[o]=t[o]:this[o]=i[o];this.url=e,this.Me=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var r,c=this,s=!1,u=!1,a=null,f=document.createElement("div");function h(e,n){var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,n),t}f.addEventListener("open",function(e){c.onopen(e)}),f.addEventListener("close",function(e){c.onclose(e)}),f.addEventListener("connecting",function(e){c.We(e)}),f.addEventListener("message",function(e){c.onmessage(e)}),f.addEventListener("error",function(e){c.onerror(e)}),this.addEventListener=f.addEventListener.bind(f),this.removeEventListener=f.removeEventListener.bind(f),this.dispatchEvent=f.dispatchEvent.bind(f),this.open=function(i){if((r=new WebSocket(c.url,n||[])).binaryType=this.binaryType,i){if(this.Ie&&this.Me>this.Ie)return}else f.dispatchEvent(h("connecting")),this.Me=0;(c.debug||d.Ee)&&console.debug("ReconnectingWebSocket","attempt-connect",c.url);var e=r,t=setTimeout(function(){(c.debug||d.Ee)&&console.debug("ReconnectingWebSocket","connection-timeout",c.url),u=!0,e.close(),u=!1},c.ue);r.onopen=function(e){clearTimeout(t),(c.debug||d.Ee)&&console.debug("ReconnectingWebSocket","onopen",c.url),c.protocol=r.protocol,c.readyState=WebSocket.OPEN,c.Me=0;var n=h("open");n.Oe=i,i=!1,f.dispatchEvent(n)},r.onclose=function(e){if(clearTimeout(t),r=null,s)c.readyState=WebSocket.CLOSED,f.dispatchEvent(h("close"));else{c.readyState=WebSocket.CONNECTING;var n=h("connecting");n.code=e.code,n.reason=e.reason,n.wasClean=e.wasClean,f.dispatchEvent(n),i||u||((c.debug||d.Ee)&&console.debug("ReconnectingWebSocket","onclose",c.url),f.dispatchEvent(h("close")));var t=c.Ce*Math.pow(c.Pe,c.Me);a=setTimeout(function(){c.Me++,c.open(!0)},t>c.xe?c.xe:t)}},r.onmessage=function(e){(c.debug||d.Ee)&&console.debug("ReconnectingWebSocket","onmessage",c.url,e.data);var n=h("message");n.data=e.data,f.dispatchEvent(n)},r.onerror=function(e){(c.debug||d.Ee)&&console.debug("ReconnectingWebSocket","onerror",c.url,e),f.dispatchEvent(h("error"))}},1==this.Re&&this.open(!1),this.send=function(e){if(r)return(c.debug||d.Ee)&&console.debug("ReconnectingWebSocket","send",c.url,e),r.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,n){void 0===e&&(e=1e3),s=!0,r&&r.close(e,n),a&&(clearTimeout(a),a=null)},this.refresh=function(){r&&r.close()}}},void 0!==n&&n.t?n.t=o():i.Se=o()},{}],6:[function(e,n,t){},{}],7:[function(e,n,t){var i,o,r=n.t={};function c(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(n){if(i===setTimeout)return setTimeout(n,0);if((i===c||!i)&&setTimeout)return i=setTimeout,setTimeout(n,0);try{return i(n,0)}catch(e){try{return i.call(null,n,0)}catch(e){return i.call(this,n,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:c}catch(e){i=c}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var a,f=[],h=!1,d=-1;function l(){h&&a&&(h=!1,a.length?f=a.concat(f):d=-1,f.length&&b())}function b(){if(!h){var e=u(l);h=!0;for(var n=f.length;n;){for(a=f,f=[];++d<n;)a&&a[d].Ae();d=-1,n=f.length}a=null,h=!1,function(n){if(o===clearTimeout)return clearTimeout(n);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(n);try{o(n)}catch(e){try{return o.call(null,n)}catch(e){return o.call(this,n)}}}(e)}}function v(e,n){this.Ke=e,this.Ge=n}function w(){}r.Ue=function(e){var n=new Array(arguments.length-1);if(1<arguments.length)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];f.push(new v(e,n)),1!==f.length||h||u(b)},v.prototype.Ae=function(){this.Ke.apply(null,this.Ge)},r.title="browser",r.oe=!0,r.N={},r.qe=[],r.version="",r.De={},r.Ne=w,r.addListener=w,r.je=w,r.Be=w,r.removeListener=w,r.Fe=w,r.He=w,r.Le=w,r.Je=w,r.Ve=function(e){return[]},r.ze=function(e){throw new Error("process.binding is not supported")},r.Qe=function(){return"/"},r.Xe=function(e){throw new Error("process.chdir is not supported")},r.Ye=function(){return 0}},{}]},{},[1])(1)});